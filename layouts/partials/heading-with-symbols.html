{{- /* layouts/partials/heading-with-symbols.html */ -}}
{{- /*
  Context (.) expected:
  - level: Heading level (int 1-6)
  - anchor: ID for the heading (string)
  - text: Inner HTML content for the heading (string, must be safeHTML)
  
  PERFORMANCE OPTIMIZED: Eliminates expensive .Scratch operations
  Uses deterministic symbol selection based on anchor string for consistency
*/ -}}

{{- $level := .level | default 2 -}}
{{- $anchor := .anchor | default (.text | plainify | urlize) -}}
{{- $text := .text | safeHTML -}}

{{- /* Define the base list of symbols */ -}}
{{- $symbols := slice "ð“†™" "ð“‚€" "â–³" "ð“‹¹" "ð“‡³" "âš•" "âœ¡" "ÖŽ" "âˆž" "â–²" "ð“†“" "ð“‚“" -}}

{{- /* Deterministic symbol selection based on anchor string (eliminates .Scratch) */ -}}
{{- $symbolIndex := mod (len $anchor) (len $symbols) -}}
{{- $currentSymbol := index $symbols $symbolIndex -}}

{{- /* Set CSS variables for the ::before and ::after content */ -}}
{{- $style := printf `--symbol-before: '%s '; --symbol-after: ' %s';` $currentSymbol $currentSymbol | safeCSS -}}

{{- /* Output the heading element */ -}}
<h{{ $level }} id="{{ $anchor }}" style="{{ $style }}">{{ $text }}</h{{ $level }}>